import{a as A}from"./chunk-35ZEFZSB.js";import{c as E}from"./chunk-5MG6H3A2.js";import"./chunk-B4PBK4UQ.js";import{k as P,l as S,m as w,n as T}from"./chunk-S3FBWAZS.js";import{Ha as y,Ka as o,La as h,Ya as f,_a as l,aa as v,cb as i,db as r,eb as x,hb as I,ja as u,ka as g,kb as _,lb as s,mb as O,ob as c,pb as p,qb as k,vb as M,wb as b,xb as C}from"./chunk-V2OZTUYM.js";function F(n,m){n&1&&(i(0,"h2"),c(1,"Cart Items:"),r())}function q(n,m){n&1&&(i(0,"div",5)(1,"p"),x(2,"img",6),r()())}function j(n,m){if(n&1){let t=I();i(0,"div",9),x(1,"img",10),i(2,"div",11)(3,"h3"),c(4),r(),i(5,"p"),c(6),r(),i(7,"p"),c(8),b(9,"currency"),r(),i(10,"div",12)(11,"button",13),_("click",function(){let a=u(t).$implicit,d=s(2);return g(d.decrementQuantity(a))}),c(12,"-"),r(),i(13,"span"),c(14),r(),i(15,"button",13),_("click",function(){let a=u(t).$implicit,d=s(2);return g(d.incrementQuantity(a))}),c(16,"+"),r(),i(17,"div",14)(18,"button",15),_("click",function(){let a=u(t).$implicit,d=s(2);return g(d.removeItem(a))}),x(19,"i",16),r()()()()()}if(n&2){let t=m.$implicit,e=s(2);o(),O("alt",t.title),l("src",e.getSafeUrl(t.images[0]),y),o(3),p(t.title),o(2),p(t.description),o(2),p(C(9,6,t.price,"EGP")),o(6),p(t.quantity)}}function z(n,m){if(n&1&&(i(0,"div",7),f(1,j,20,9,"div",8),r()),n&2){let t=s();o(),l("ngForOf",t.cartItems)("ngForTrackBy",t.trackByFn)}}function V(n,m){if(n&1&&(i(0,"h3"),c(1),b(2,"currency"),r()),n&2){let t=s();o(),k("Total Amount: ",C(2,1,t.totalAmount,"EGP"),"")}}var G=(()=>{class n{constructor(t,e){this.cartService=t,this.sanitizer=e,this.cartItems=[],this.cartItemCount=0,this.totalAmount=0}ngOnInit(){this.cartItems=this.cartService.getCartItems(),this.calculateTotalAmount(),this.subscription=this.cartService.getCartItemCount().subscribe(t=>{this.cartItemCount=t,this.calculateTotalAmount()})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}getSafeUrl(t){return this.sanitizer.bypassSecurityTrustUrl(t)}incrementQuantity(t){t.quantity++,this.cartService.updateCartItem(t),this.calculateTotalAmount()}decrementQuantity(t){t.quantity>1?(t.quantity--,this.cartService.updateCartItem(t)):this.removeItem(t),this.calculateTotalAmount()}removeItem(t){let e=this.cartItems.indexOf(t);e>-1&&(this.cartItems.splice(e,1),this.cartService.removeCartItem(t)),this.calculateTotalAmount()}calculateTotalAmount(){this.totalAmount=this.cartItems.reduce((t,e)=>t+e.price*e.quantity,0)}trackByFn(t,e){return e.id}static{this.\u0275fac=function(e){return new(e||n)(h(A),h(E))}}static{this.\u0275cmp=v({type:n,selectors:[["app-cart"]],standalone:!0,features:[M],decls:6,vars:4,consts:[[1,"cart-container"],[4,"ngIf"],["class","empty-cart",4,"ngIf"],["class","cart-items-container",4,"ngIf"],[1,"cart-total"],[1,"empty-cart"],["src","assets/imgGallery/empty cart.jfif","alt","Empty cart",1,"empty-cart-image"],[1,"cart-items-container"],["class","cart-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cart-item"],[1,"product-image",3,"src","alt"],[1,"item-details"],[1,"quantity-controls"],[3,"click"],[1,"remove-button-container"],[1,"remove-button",3,"click"],[1,"fas","fa-trash-alt"]],template:function(e,a){e&1&&(i(0,"div",0),f(1,F,2,0,"h2",1)(2,q,3,0,"div",2)(3,z,2,2,"div",3),i(4,"div",4),f(5,V,3,4,"h3",1),r()()),e&2&&(o(),l("ngIf",a.cartItems.length>0),o(),l("ngIf",a.cartItems.length===0),o(),l("ngIf",a.cartItems.length>0),o(2),l("ngIf",a.cartItems.length>0))},dependencies:[T,P,S,w],styles:[".cart-container[_ngcontent-%COMP%]{padding:20px;max-width:800px;margin:0 auto;background-color:#f9f9f9;border-radius:8px;box-shadow:0 2px 8px #0000001a}.cart-items-container[_ngcontent-%COMP%]{max-height:465px;overflow-y:auto;padding-right:10px}.cart-items-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}.cart-items-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:10px}.cart-items-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#daa520;border-radius:10px;border:3px solid #f1f1f1}.cart-items-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#b8860b}.cart-items-container[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:goldenrod #f1f1f1}.cart-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:20px;border-bottom:1px solid #ccc;padding-bottom:10px;transition:background-color .3s}.cart-item[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.product-image[_ngcontent-%COMP%]{width:100px;height:100px;object-fit:cover;margin-right:20px;border-radius:8px}.item-details[_ngcontent-%COMP%]{flex:1}.cart-total[_ngcontent-%COMP%]{margin-top:20px;text-align:right;font-weight:700;font-size:1.2em}.empty-cart[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;text-align:center}.empty-cart-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain}@media (max-width: 600px){.cart-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.product-image[_ngcontent-%COMP%]{margin-bottom:10px}}.quantity-controls[_ngcontent-%COMP%]{display:flex;align-items:center}.quantity-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:2px solid goldenrod;background-color:#daa520;color:#fff;font-size:12px;margin:4px;border-radius:50%;text-align:center;width:30px;height:30px;padding:5px;transition:background-color .3s,border-color .3s}.quantity-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#daa520;color:#000;border-color:#000}.remove-button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%}.remove-button[_ngcontent-%COMP%]{background-color:#daa520;border:2px solid goldenrod;color:#fff;padding:5px;border-radius:50%;width:30px;height:30px;transition:background-color .3s,border-color .3s}.remove-button[_ngcontent-%COMP%]:hover{background-color:#daa520;color:#000;border-color:#000}.remove-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px;color:#fff}"]})}}return n})();export{G as CartComponent};
